# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Upgradeable Contracts

## –ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ –¥–µ–ø–ª–æ—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (1 –º–∏–Ω—É—Ç–∞)

```bash
cd splitbill/contracts

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å OpenZeppelin
forge install OpenZeppelin/openzeppelin-contracts-upgradeable --no-commit

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jq (–µ—Å–ª–∏ –Ω–µ—Ç)
brew install jq  # macOS
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (1 –º–∏–Ω—É—Ç–∞)

```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
export PRIVATE_KEY=your_private_key_without_0x

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å (–Ω—É–∂–Ω–æ ~0.01 ETH)
cast balance $(cast wallet address $PRIVATE_KEY) --rpc-url https://sepolia.base.org
```

–ù–µ—Ç ETH? –ü–æ–ª—É—á–∏—Ç–µ –∑–¥–µ—Å—å: https://www.coinbase.com/faucets/base-ethereum-sepolia-faucet

### 3. –î–µ–ø–ª–æ–π (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
./deploy-upgradeable.sh
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ:
```
‚úÖ Deployment Complete!

SplitBillEscrow Proxy:        0xABC...
BillMetadataRegistry Proxy:   0xDEF...
```

### 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å–∞ (1 –º–∏–Ω—É—Ç–∞)

–î–æ–±–∞–≤—å—Ç–µ –≤ `splitbill/.env.local`:

```env
NEXT_PUBLIC_ESCROW_ADDRESS=0xABC...
NEXT_PUBLIC_METADATA_REGISTRY_ADDRESS=0xDEF...
```

### 5. –ì–æ—Ç–æ–≤–æ! üéâ

–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ)

### –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é?

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ SplitBillEscrowUpgradeable.sol
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ upgrade
./upgrade-contracts.sh
```

**–ê–¥—Ä–µ—Å–∞ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è!** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å proxy
export ESCROW_PROXY=0xABC...

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é
cast call $ESCROW_PROXY "version()(uint256)" --rpc-url https://sepolia.base.org
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å owner
cast call $ESCROW_PROXY "owner()(address)" --rpc-url https://sepolia.base.org
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: –≤–∞—à –∞–¥—Ä–µ—Å
```

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
üìñ –ß–∏—Ç–∞–π—Ç–µ: `UPGRADEABLE_SUMMARY.md`

### –î–ª—è –¥–µ–ø–ª–æ—è –≤ mainnet
üìã –°–ª–µ–¥—É–π—Ç–µ: `DEPLOYMENT_CHECKLIST.md`

### –î–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
üìù –°–º–æ—Ç—Ä–∏—Ç–µ: `COMMANDS_CHEATSHEET.md`

### –î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ö–µ–º—ã
üèóÔ∏è –ò–∑—É—á–∞–π—Ç–µ: `ARCHITECTURE.md`

---

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ù—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∞–¥—Ä–µ—Å–∞ –ø–æ—Å–ª–µ upgrade?
‚ùå –ù–µ—Ç! –ê–¥—Ä–µ—Å–∞ proxy –æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–º–∏ –∂–µ –Ω–∞–≤—Å–µ–≥–¥–∞.

### –°–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ upgrade?
‚úÖ –î–∞! –í—Å–µ bills, payments, metadata –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ.

### –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é?
‚úÖ –î–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `upgradeTo()` —Å –∞–¥—Ä–µ—Å–æ–º —Å—Ç–∞—Ä–æ–≥–æ implementation.

### –ö—Ç–æ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã?
üîí –¢–æ–ª—å–∫–æ owner (–≤–∞—à –∫–æ—à–µ–ª–µ–∫ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ).

### –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç upgrade?
üí∞ ~$1-2 (—Ç–æ–ª—å–∫–æ –¥–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ implementation).

---

## –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å ETH
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PRIVATE_KEY –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ OpenZeppelin —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
5. –ß–∏—Ç–∞–π—Ç–µ `UPGRADEABLE_SUMMARY.md`

---

## –ö–æ–º–∞–Ω–¥—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é
cast call $PROXY "version()(uint256)" --rpc-url $RPC_URL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å owner
cast call $PROXY "owner()(address)" --rpc-url $RPC_URL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å implementation
cast implementation $PROXY --rpc-url $RPC_URL

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç
./upgrade-contracts.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
cast balance $PROXY --rpc-url $RPC_URL
```

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å upgradeable –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã! üöÄ**

–û–¥–∏–Ω —Ä–∞–∑ –¥–µ–ø–ª–æ–∏—Ç–µ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —Ä–∞–∑!
